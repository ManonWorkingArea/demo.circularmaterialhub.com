<section class="course-area padding-top-20px padding-bottom-120px">
    <div class="course-wrapper">
        <div class="container text-center">

            <div class="row">
              <div class="col-md-12">
                <div class="top-head">
                  <div class="text">1.ข้อกำหนดทั่วไป (General requirements) <div class="back-home" onclick="page('app/assumption/dashboard');"><i class="fa fa-home"></i> กลับหน้าหลัก</div></div>
                </div>
              </div>

              <div class="col-md-12">
                <div class="container-fluid">
                  <ul class="list-unstyled multi-steps">
                    <li class="is-active">ข้อกำหนดทั่วไป</li>
                    <li onclick="page('app/assumption/specific/1');">ข้อกำหนดเฉพาะ</li>
                  </ul>
                </div>
              </div>
            </div>

            <!---        MAIN CHOICE         -->

            <div class="row">
              <div class="col-md-12">
                <table class="table table-striped table-bordered text-left">
                  <thead class="thead-dark">
                    <tr>
                      <th width="5"><i class="fa fa-check"></i></th>
                      <th>ข้อกำหนดทั่วไป (General requirements)<span class="pull-right score-result">ผลลัพธ์ ไม่ผ่าน</span></th>
                    </tr>
                  </thead>
                  <tbody>

                    <tr class="top-form-head">

                      <td colspan="2">
                        <div class="text padding-bottom-10px">เลือกขนาดสถานประกอบการ</div>
                        <div class="text">
                          <table class="table table-striped table-bordered table-sm factory-table">
                            <thead>
                              <tr>
                                <th>ขนาดสถานประกอบการ</th>
                                <th>จำนวนการจ้างงาน</th>
                                <th>มูลค่าสินทรัพย์ถาวร</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td>
                                  <div class="inline-form-radio">

                                    <div class="form-group">
                                      <div class="custom-radio">
                                          <input type="radio" class="custom-control-input" name="topic_0_score" id="topic_0_score_1" value="1">
                                          <label class="custom-control-label custom--control-label" for="topic_0_score_1">ขนาดเล็ก</label>
                                      </div>
                                    </div>

                                  </div>
                                </td>
                                <td>ไม่เกิน 50 คน</td>
                                <td>ไม่เกิน 50 ล้านบาท</td>
                              </tr>
                              <tr>
                                <td>
                                  <div class="inline-form-radio">

                                    <div class="form-group">
                                      <div class="custom-radio">
                                          <input type="radio" class="custom-control-input" name="topic_0_score" id="topic_0_score_2" value="2">
                                          <label class="custom-control-label custom--control-label" for="topic_0_score_2">ขนาดกลาง</label>
                                      </div>
                                    </div>

                                  </div>
                                </td>
                                <td>ไม่เกิน 51-200 คน</td>
                                <td>ไม่เกิน 51-200 ล้านบาท</td>
                              </tr>
                              <tr>
                                <td>
                                  <div class="inline-form-radio">

                                    <div class="form-group">
                                      <div class="custom-radio">
                                          <input type="radio" class="custom-control-input" name="topic_0_score" id="topic_0_score_3" value="3">
                                          <label class="custom-control-label custom--control-label" for="topic_0_score_3">ขนาดใหญ่</label>
                                      </div>
                                    </div>

                                  </div>
                                </td>
                                <td>มากกว่า 200 คน ขึ้นไป</td>
                                <td>มากกว่า 200 ล้านบาทขึ้นไป</td>
                              </tr>
                            </tbody>
                          </table>

                        </div>
                      </td>

                    </tr>

                    <tr class="top-form-head">

                      <td width="5">
                        <div class="form">
                          <div class="form-group">
                              <div class="custom-checkbox">
                                <input type="checkbox" id="topic_1" name="topic_1">
                                <label for="topic_1"><span class="line-height-24 d-block"> </span></label>
                              </div>
                          </div>
                        </div>
                      </td>

                      <td>
                        <div class="text">ปฏิบัติตามกฎหมาย ระเบียบ และข้อกำหนดที่เกี่ยวข้องกับสิ่งแวดล้อม พลังงาน อาชีวอนามัย และความปลอดภัย</div>
                      </td>

                    </tr>

                    <tr class="top-form-head">

                      <td width="5">
                        <div class="form">
                          <div class="form-group">
                              <div class="custom-checkbox">
                                <input type="checkbox" id="topic_2" name="topic_2" disabled>
                                <label for="topic_2"><span class="line-height-24 d-block"> </span></label>
                              </div>
                          </div>
                        </div>
                      </td>

                      <td>
                        <div class="text">
                        ดำเนินการระบบการจัดการสิ่งแวดล้อม (อย่างใดอย่างหน่งหรือหลายอย่าง)</br>

                          <div class="inline-form">
                            <div class="form-group">
                                <div class="custom-checkbox">
                                  <input type="checkbox" name="topic_2_score" id="topic_2_score_1" value="1">
                                  <label for="topic_2_score_1"><span class="line-height-24 d-block">การจัดทำระบบมาตรฐาน ISO14001</span></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-checkbox">
                                  <input type="checkbox" name="topic_2_score" id="topic_2_score_2" value="2">
                                  <label for="topic_2_score_2"><span class="line-height-24 d-block">อุตสาหกรรมสีเขียว ระดับที่ 3 ระบบส่ี่เขียว (Green System)</span></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-checkbox">
                                  <input type="checkbox" name="topic_2_score" id="topic_2_score_3" value="3">
                                  <label for="topic_2_score_3"><span class="line-height-24 d-block">มาตรฐานอื่น ๆ เทียบเท่ามาตรฐาน ISO 14001 หรืออุตสาหกรรมสีเขียวระดับที่ 3</span></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-checkbox">
                                  <input type="checkbox" name="topic_2_score" id="topic_2_score_4" value="4">
                                  <label for="topic_2_score_4"><span class="line-height-24 d-block">มีนโยบายสิ่งแวดล้อมและดำเนินการโครงการสิ่งแวดล้อมเพื่อจัดการประเมินปัญหาสิ่งแวดล้อมหลัก</span></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-checkbox">
                                  <input type="checkbox" name="topic_2_score" id="topic_2_score_5" value="5">
                                  <label for="topic_2_score_5"><span class="line-height-24 d-block">Green Industry ระดับที่ 2 (GI2)</span></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-checkbox">
                                  <input type="checkbox" name="topic_2_score" id="topic_2_score_6" value="6">
                                  <label for="topic_2_score_6"><span class="line-height-24 d-block">รางวัลธงขาวดาวเขียว</span></label>
                                </div>
                            </div>
                          </div>

                        </div>
                      </td>

                    </tr>


                    <tr class="top-form-head">

                      <td width="5">
                        <div class="form">
                          <div class="form-group">
                              <div class="custom-checkbox">
                                <input type="checkbox" id="topic_3" name="topic_3" disabled>
                                <label for="topic_3"><span class="line-height-24 d-block"> </span></label>
                              </div>
                          </div>
                        </div>
                      </td>

                      <td>
                        <div class="text">

                        ข้อร้องเรียนด้านสิ่งแวดล้อมและความปลอดภัย/อุบัติเหตุร้ายแรง</br>

                          <div class="inline-form">
                            <div class="form-group">
                                <div class="custom-checkbox">
                                  <input type="checkbox" name="topic_3_score" id="topic_3_score_1" value="1">
                                  <label for="topic_3_score_1"><span class="line-height-24 d-block">ไม่มีข้อร้องเรียนด้านสิ่งแวดล้อมและความปลอดภัย/อุบัติเหตุร้ายแรง ที่กระทบกับภายนอกองคกรภายในระยะเวลา 1 ปี (ภายในวันตรวจประเมิน)</span></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-checkbox">
                                  <input type="checkbox" name="topic_3_score" id="topic_3_score_2" value="2">
                                  <label for="topic_3_score_2"><span class="line-height-24 d-block">มีข้อร้องเรียนภายด้านสิ่งแวดล้อมและความปลอดภัย/อุบัติเหตุร้ายแรงที่กระทบกับภายนอก องค์กร ในระยะเวลา 1 ปี แต่ได้รับการแก้ไขแล้วเสร็จภายในวันตรวจประเมิน</span></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="custom-checkbox">
                                  <input type="checkbox" name="topic_3_score" id="topic_3_score_3" value="3">
                                  <label for="topic_3_score_3"><span class="line-height-24 d-block">มีข้อร้องเรียนด้านสิ่งแวดล้อมและความปลอดภัย /อุบัติเหตุร้ายแรงที่กระทบกับภายนอกองคกร ภายในระยะเวลา 1 ปีภายในวันตรวจประเมินและยังไม่ได้รับการแก้ไข</span></label>
                                </div>
                            </div>

                        </div>
                      </td>

                    </tr>

                    <tr class="top-form-head">

                      <td width="5">
                        <div class="form">
                          <div class="form-group">
                              <div class="custom-checkbox">
                                <input type="checkbox" id="topic_4" name="topic_4">
                                <label for="topic_4"><span class="line-height-24 d-block"> </span></label>
                              </div>
                          </div>
                        </div>
                      </td>

                      <td>
                        <div class="text">การเข้าร่วมโครงการของหน่วยงานภาครัฐที่เกี่ยวข้องกับสิ่งแวดล้อมีพลังงาน อาชีวอนามัย และความปลอดภัย ย้อนหลังไม่เกิน 3 ปีนับจากวันตรวจประเมิน (โปรดระบุชื่อโครงการ)</br>
                        1. โครงการGreen Industry (GI3)</br>
                        2. โครงการ3Rs+ Awards</br>
                        3. โครงการAmata Best Waste Management Awards</div>
                      </td>

                    </tr>

                  </tbody>
                  </table>
              </div>

            </div>

        </div>
    </div>
</section>

<style>
.inline-form-radio
{
padding-top: 0px;
}
</style>

<script>

var formset = "step1";
var recapGroups_count = 1;

$(document).ready(function()
{
  // FACTORY SIZE
  var quiz0_topic_0 = localStorage.getItem("quiz0_topic_0_score");
  if (quiz0_topic_0 !== null)
  {
    $('input:radio[name=topic_0_score][value='+quiz0_topic_0+']').attr('checked', true);
  }
  //----------------------------------------------------------------------------
  // TOPIC 1
  var quiz0_topic_1 = localStorage.getItem("quiz0_topic_1");
  if (quiz0_topic_1 !== null)
  {
    if(quiz0_topic_1==="checked")
    {
      $('input[name="topic_1"]').attr("checked",true);
    }
    else
    {
      $('input[name="topic_1"]').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 2
  var quiz0_topic_2 = localStorage.getItem("quiz0_topic_2");
  if (quiz0_topic_2 !== null)
  {
    if(quiz0_topic_2 === "checked")
    {
      $('input[name="topic_2"]').attr("checked",true);
    }
    else
    {
      $('input[name="topic_2"]').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 2 - 1
  var quiz0_topic_2_score_1 = localStorage.getItem("quiz0_topic_2_score_1");
  if (quiz0_topic_2_score_1 !== null)
  {
    if(quiz0_topic_2_score_1 === "checked")
    {
      $('#topic_2_score_1').attr("checked",true);
    }
    else
    {
      $('#topic_2_score_1').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 2 - 2
  var quiz0_topic_2_score_2 = localStorage.getItem("quiz0_topic_2_score_2");
  if (quiz0_topic_2_score_2 !== null)
  {
    if(quiz0_topic_2_score_2 === "checked")
    {
      $('#topic_2_score_2').attr("checked",true);
    }
    else
    {
      $('#topic_2_score_2').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 2 - 3
  var quiz0_topic_2_score_3 = localStorage.getItem("quiz0_topic_2_score_3");
  if (quiz0_topic_2_score_3 !== null)
  {
    if(quiz0_topic_2_score_3 === "checked")
    {
      $('#topic_2_score_3').attr("checked",true);
    }
    else
    {
      $('#topic_2_score_3').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 2 - 4
  var quiz0_topic_2_score_4 = localStorage.getItem("quiz0_topic_2_score_4");
  if (quiz0_topic_2_score_4 !== null)
  {
    if(quiz0_topic_2_score_4 === "checked")
    {
      $('#topic_2_score_4').attr("checked",true);
    }
    else
    {
      $('#topic_2_score_4').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 2 - 5
  var quiz0_topic_2_score_5 = localStorage.getItem("quiz0_topic_2_score_5");
  if (quiz0_topic_2_score_5 !== null)
  {
    if(quiz0_topic_2_score_5 === "checked")
    {
      $('#topic_2_score_5').attr("checked",true);
    }
    else
    {
      $('#topic_2_score_5').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 2 - 6
  var quiz0_topic_2_score_6 = localStorage.getItem("quiz0_topic_2_score_6");
  if (quiz0_topic_2_score_6 !== null)
  {
    if(quiz0_topic_2_score_6 === "checked")
    {
      $('#topic_2_score_6').attr("checked",true);
    }
    else
    {
      $('#topic_2_score_6').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 3
  var quiz0_topic_3 = localStorage.getItem("quiz0_topic_3");
  if (quiz0_topic_3 !== null)
  {
    if(quiz0_topic_3 === "checked")
    {
      $('input[name="topic_3"]').attr("checked",true);
    }
    else
    {
      $('input[name="topic_3"]').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 3 - 1
  var quiz0_topic_3_score_1 = localStorage.getItem("quiz0_topic_3_score_1");
  if (quiz0_topic_3_score_1 !== null)
  {
    if(quiz0_topic_3_score_1 === "checked")
    {
      $('#topic_3_score_1').attr("checked",true);
    }
    else
    {
      $('#topic_3_score_1').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 3 - 2
  var quiz0_topic_3_score_2 = localStorage.getItem("quiz0_topic_3_score_2");
  if (quiz0_topic_3_score_2 !== null)
  {
    if(quiz0_topic_3_score_2 === "checked")
    {
      $('#topic_3_score_2').attr("checked",true);
    }
    else
    {
      $('#topic_3_score_2').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 3 - 3
  var quiz0_topic_3_score_3 = localStorage.getItem("quiz0_topic_3_score_3");
  if (quiz0_topic_3_score_3 !== null)
  {
    if(quiz0_topic_3_score_3 === "checked")
    {
      $('#topic_3_score_3').attr("checked",true);
    }
    else
    {
      $('#topic_3_score_3').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------
  // TOPIC 4
  var quiz0_topic_4 = localStorage.getItem("quiz0_topic_4");
  if (quiz0_topic_4 !== null)
  {
    if(quiz0_topic_4 === "checked")
    {
      $('input[name="topic_4"]').attr("checked",true);
    }
    else
    {
      $('input[name="topic_4"]').attr("checked",false);
    }
  }
  //----------------------------------------------------------------------------

  $('input[type="checkbox"]').click(function(){
    calculator();
  });

  $('input[type="radio"]').click(function(){
    calculator();
  });

  $('input[type="text"]').bind("change paste keyup", function(){
    calculator();
  });

  $('.score-result').html("ผลลัพธ์ " + Cookies.get(formset));

  //----------------------------------------------------------------------------
});

function scoreCal(stepCheck, groupCheck)
{
  step = recapStepCheck(stepCheck);
  recapGroupCheck(groupCheck);
  recapStepCheck(0);
  return step;
}

function recapStepCheck(ids)
{
  var count = $('input[name=topic_' + ids + '_score]:checked').length;

  if(count>=recapGroups_count)
  {
    $("#topic_" + ids).attr("checked", true);
    radioanswer = $('input[name=topic_' + ids + '_score]:checked').val();
    localStorage.setItem("quiz0_topic_" + ids, "checked");
    localStorage.setItem("quiz0_topic_" + ids + "_score", radioanswer);
  }
  else
  {
    $("#topic_" + ids).attr("checked", false);
    localStorage.setItem("quiz0_topic_" + ids, "unchecked");
    localStorage.setItem("quiz0_topic_" + ids + "_score", "0");
  }
  return radioanswer;
}

function recapGroupCheck(ids)
{
  var count = $('input[name=topic_' + ids + '_score]:checked').length;

  if(count>=recapGroups_count)
  {
    $("#topic_" + ids).attr("checked", true);
    localStorage.setItem("quiz0_topic_" + ids, "checked");
  }
  else
  {
    $("#topic_" + ids).attr("checked", false);
    localStorage.setItem("quiz0_topic_" + ids, "unchecked");
  }
}

function calculator()
{
  topic2_real_score = scoreCal(2,3);
  formStepCheck(topic2_real_score);
}

function formStepCheck(score)
{
  var step1 = ($('#topic_1').is(":checked") ? "yes" : "no");
  var step2 = ($('#topic_2').is(":checked") ? "yes" : "no");
  var step3 = ($('#topic_3').is(":checked") ? "yes" : "no");
  var step4 = ($('#topic_4').is(":checked") ? "yes" : "no");

  var step2_1 = ($('#topic_2_score_1').is(":checked") ? "yes" : "no");
  var step2_2 = ($('#topic_2_score_2').is(":checked") ? "yes" : "no");
  var step2_3 = ($('#topic_2_score_3').is(":checked") ? "yes" : "no");
  var step2_4 = ($('#topic_2_score_4').is(":checked") ? "yes" : "no");
  var step2_5 = ($('#topic_2_score_5').is(":checked") ? "yes" : "no");
  var step2_6 = ($('#topic_2_score_6').is(":checked") ? "yes" : "no");

  var size = $('input[name="topic_0_score"]:checked').val();

  //console.log("STEP 1 : " + step1);
  //console.log("STEP 2 : " + step2);
  //console.log("STEP 2 Score : " + score);
  console.log("SIZE : " + size);

  if(size=="1")
  {
    if(step2_1=="yes" || step2_2 =="yes" || step2_3 =="yes" || step2_4 =="yes" || step2_5 =="yes" || step2_6 =="yes")
    {
      step_2_check = "yes"
    }
    else
    {
      step_2_check = "no"
    }
  }
  else if(size=="2")
  {
    if(step2_1=="yes" || step2_2 =="yes" || step2_3 =="yes" || step2_4 =="yes" || step2_5 =="yes" || step2_6 =="yes")
    {
      step_2_check = "yes"
    }
    else
    {
      step_2_check = "no"
    }
  }
  else if(size=="3")
  {
    if(step2_1=="yes" || step2_2 =="yes" || step2_3 =="yes")
    {
      step_2_check = "yes"
    }
    else
    {
      step_2_check = "no"
    }
  }

  var formScore = "0";

  if(step1 == "no")
  {
    formScore = "ไม่ผ่าน";
  }
  else
  {
    if(step2 == "no" || step_2_check == "no")
    {
      formScore = "ไม่ผ่าน";
    }
    else
    {
      if(step3 == "no")
      {
        formScore = "ไม่ผ่าน"
      }
      else
      {
        if(step4 == "no")
        {
          formScore = "ไม่ผ่าน"
        }
        else
        {
          formScore = "ผ่าน"
        }

      }
    }
  }

  console.log("SIZE : " + size);
  console.log("2 : " + step2);
  console.log("2 sc : " + step_2_check);
  //----------------------------------------------------------------------------
  console.log("ALL SCORE : " + formScore);
  //----------------------------------------------------------------------------
  $('.score-result').html("ผลลัพธ์ " + formScore);
  //----------------------------------------------------------------------------
  Cookies.set(formset, formScore);
}

function nextPage(pagenumber)
{
  page("app/assumption/specific/" + pagenumber);
}

window.onbeforeunload = function()
{
  //----------------------------------------------------------------------------
  // TOPIC 1
  if($('input[name="topic_1"]').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_1", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_1", "unchecked");
  }
  //----------------------------------------------------------------------------
  // TOPIC 2 SCORE
  if($('input[name="topic_2"]').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_2", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_2", "unchecked");
  }
  // TOPIC 2 - 1
  if($('#topic_2_score_1').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_2_score_1", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_2_score_1", "unchecked");
  }
  // TOPIC 2 - 2
  if($('#topic_2_score_2').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_2_score_2", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_2_score_2", "unchecked");
  }
  // TOPIC 2 - 3
  if($('#topic_2_score_3').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_2_score_3", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_2_score_3", "unchecked");
  }
  // TOPIC 2 - 4
  if($('#topic_2_score_4').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_2_score_4", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_2_score_4", "unchecked");
  }
  // TOPIC 2 - 5
  if($('#topic_2_score_5').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_2_score_5", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_2_score_5", "unchecked");
  }
  // TOPIC 2 - 6
  if($('#topic_2_score_6').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_2_score_6", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_2_score_6", "unchecked");
  }

  // TOPIC 3
  if($('input[name="topic_3"]').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_3", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_3", "unchecked");
  }
  //----------------------------------------------------------------------------
  // TOPIC 3 - 1
  if($('#topic_3_score_1').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_3_score_1", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_3_score_1", "unchecked");
  }
  //----------------------------------------------------------------------------
  // TOPIC 3 - 2
  if($('#topic_3_score_2').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_3_score_2", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_3_score_2", "unchecked");
  }
  //----------------------------------------------------------------------------
  // TOPIC 3 - 3
  if($('#topic_3_score_3').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_3_score_3", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_3_score_3", "unchecked");
  }
  //----------------------------------------------------------------------------
  // TOPIC 4
  if($('input[name="topic_4"]').is(':checked'))
  {
    localStorage.setItem("quiz0_topic_4", "checked");
  }
  else
  {
    localStorage.setItem("quiz0_topic_4", "unchecked");
  }
}

</script>
